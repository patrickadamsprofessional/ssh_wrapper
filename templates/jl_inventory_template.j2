# jl_inventory_template.j2
# Jinja2 template for jl inventory YAML (Nornir-style)
# Wildcard entries never provide an IP/hostname; /etc/hosts and DNS will be checked for the actual address.

hosts:
{% for host, data in hosts.items() %}
  {{ host }}:
{% for k, v in data.items() %}
    {{ k }}: {{ v|tojson if v is mapping or v is sequence else v }}
{% endfor %}
{% endfor %}

# Place partial wildcards (e.g., '*.lab', 'router*') above the catch-all '*' for correct precedence.
# The catch-all '*' should always be the last host entry.

# Example wildcard entry (for reference, not rendered):
# '*.lab':
#   username: labuser
#   keyfile: /home/labuser/.ssh/id_ed25519
# '*':
#   username: defaultuser
#   keyfile: /home/default/.ssh/id_rsa
#   password: null

defaults:
{% for k, v in defaults.items() %}
  {{ k }}: {{ v|tojson if v is mapping or v is sequence else v }}
{% endfor %} 